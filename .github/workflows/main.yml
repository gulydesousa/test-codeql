name: "MyCodeQL"

on:
  workflow_dispatch:

jobs:
  analyze:
    name: Analyze
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Initialize CodeQL
      uses: github/codeql-action/init@v2
      with:
        languages: "csharp"
        

    - name: Build
      run: |
        dotnet build ./test-codeql.sln

    - name: Perform CodeQL Analysis
      uses: github/codeql-action/analyze@v2
      with:
       token: ${{ secrets.MITOKEN }}
       queries: .github/codeql/iva-asignment.ql
       output: ../results
       upload: always
       cleanup-level: brutal
       add-snippets: false
       skip-queries: false
       checkout_path: /home/runner/work/test-codeql/test-codeql
       upload-database: true
       wait-for-processing: true
       expect-error: false
